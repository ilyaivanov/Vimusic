(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(32)},17:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),d=n(7),i=n.n(d),c=(n(17),n(1)),a=n(3);var u=function(e){return function(e){return fetch("https://www.googleapis.com/youtube/v3/search?part=snippet&shart=mostPopular&maxResults=10&key=AIzaSyBsCL-zrXWd9S2FKRSDVfz7dOo783LQkLk&q="+e).then(function(e){return e.json()}).then(function(e){return e.items.filter(function(e){return e.id.videoId}).map(function(e){return{text:e.snippet.title,id:e.id.videoId}})})}(e)},s=function(e){return function(e){return fetch("https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&key=AIzaSyBsCL-zrXWd9S2FKRSDVfz7dOo783LQkLk&relatedToVideoId="+e).then(function(e){return e.json()}).then(function(e){return e.items.filter(function(e){return e.id.videoId}).map(function(e){return{text:e.snippet.title,id:e.id.videoId}})})}(e)},l=function(e){var t=e.onSearched,n=Object(o.useState)(""),d=Object(a.a)(n,2),i=d[0],c=d[1],s=function(e,t){var n=Object(o.useState)(e),r=Object(a.a)(n,2),d=r[0],i=r[1];return Object(o.useEffect)(function(){var n=setTimeout(function(){i(e)},t);return function(){clearTimeout(n)}},[e,t]),d}(i,500),l=Object(o.useState)(!1),f=Object(a.a)(l,2),p=(f[0],f[1]);return Object(o.useEffect)(function(){s&&(p(!0),u(s).then(function(e){p(!1);var n=e.map(function(e){return{id:Math.random()+"",text:e.text,youtubeId:e.id}});t(n)}))},[s]),r.a.createElement("input",{tabIndex:1,value:i,onChange:function(e){return c(e.target.value)},type:"text",style:{width:"100%",boxSizing:"border-box"}})},f=r.a.createContext(),p=function(e){var t=e.children,n=e.app,o=e.dispatch;return r.a.createElement(f.Provider,{value:[n,o]},t)},N=n(5),v=n(4);function h(e,t){return e[e.indexOf(t)+1]}function b(e,t){return!!e&&e.indexOf(t)>=0}function O(e){return e[e.length-1]}function E(e,t){return 0==e.indexOf(t)}function y(e,t,n){var o=e.indexOf(t),r=Object(v.a)(e);return r.splice(o,0,n),r}function m(e,t){var n=e.indexOf(t);return e[n-1]}function I(e,t){if(!e)return[];e.splice(e.indexOf(t),1)}function g(e,t){var n=e.indexOf(t);return 0==n?e:[].concat(Object(v.a)(e.slice(0,n-1)),[e[n],e[n-1]],Object(v.a)(e.slice(n+1)))}function j(e,t){var n=e.indexOf(t);return n==e.length-1?e:[].concat(Object(v.a)(e.slice(0,n)),[e[n+1],e[n]],Object(v.a)(e.slice(n+2)))}var x=function(e,t){if(e.rootNodes.indexOf(t)>=0)return e.rootNodes;var n=S(e,t),o=e.nodes[n].children;if(!o)throw new Error("No children found for ".concat(t," and it doesn't exist in the root"));return o},w=function(e,t){for(var n=S(e,t);!k(e,n)&&O(x(e,n))==n;)n=S(e,n);return{parent:n,context:x(e,n)}},S=function(e,t){var n=Object.keys(e.nodes).find(function(n){return b(e.nodes[n].children,t)});if(!n)throw new Error("Couldn't find parent id for ".concat(t));return n},L=function(e,t){for(var n=t||O(e.rootNodes);C(e,n)&&!B(e,n);)n=O(T(e,n));return n},C=function(e,t){var n=T(e,t);return n&&n.length>0},T=function(e,t){return e.nodes[t].children||[]},k=function(e,t){return b(e.rootNodes,t)},R=function(e,t,n){return Object(c.a)({},e,{nodes:Object(c.a)({},e.nodes,Object(N.a)({},t,Object(c.a)({},e.nodes[t],n)))})},B=function(e,t){return e.nodes[t].isChildrenHidden},D=function(e,t){return e.nodes[t].isLoading},A=function(e){return e.nodes[e.selectedNode].isEditing},P=function(e,t){if("RESTORE"===t.type)return t.savedState;if("SET_NODES"===t.type){var n=t.nodes,o={};return n.forEach(function(e){o[e.id]=Object(c.a)({},e)}),{selectedNode:n[0].id,nodes:o,rootNodes:n.map(function(e){return e.id})}}if("EditNode"==t.type)return R(e,t.nodeId,t.props);if("CreateNode"==t.type){var r=t.props.id||Math.random()+"",d=R(e,r,Object(c.a)({},t.props,{id:r}));return 0===e.rootNodes.length||k(e,t.placeBefore)?d.rootNodes=y(d.rootNodes,t.placeBefore,r):d.nodes[S(e,t.placeBefore)]=Object(c.a)({},d.nodes[S(e,t.placeBefore)],{children:y(d.nodes[S(e,t.placeBefore)].children,t.placeBefore,r)}),d.selectedNode=r,d}if("Delete"==t.type){var i=x(e,t.nodeId);if(k(e,t.nodeId)&&1===i.length)return{rootNodes:[],selectedNode:"",nodes:{}};var a,u=Object(c.a)({},e.nodes);a=1===i.length?S(e,t.nodeId):E(i,t.nodeId)?i[1]:m(i,t.nodeId),K(u,t.nodeId),delete u[t.nodeId];var s=e.rootNodes;return k(e,t.nodeId)?I(s,t.nodeId):I(u[S(e,t.nodeId)].children,t.nodeId),Object(c.a)({},e,{rootNodes:s,selectedNode:a,nodes:u})}if("SELECT_NODE"===t.type)return Object(c.a)({},e,{selectedNode:t.nodeId});if("SET_CHILDREN"===t.type){var l=t.parentId,f=Object(c.a)({},e,{nodes:Object(c.a)({},e.nodes,Object(N.a)({},l,Object(c.a)({},e.nodes[l],{children:t.children.map(function(e){return e.id})})))});return t.children.forEach(function(e){f.nodes[e.id]=e}),f}return"SET_ROOTS"===t.type?Object(c.a)({},e,{rootNodes:t.roots}):e},K=function e(t,n){var o=t[n].children;o&&o.forEach(function(n){e(t,n),delete t[n]})},V=function(){return Object(o.useReducer)(P,{rootNodes:[],selectedNode:"",nodes:{}})},_=function(e){return Q(e,{isEditing:!1})},z=function(e){return Q(e,{isChildrenHidden:!1})},F=function(e){return Q(e,{isChildrenHidden:!0})},H=function(e){return Q(e,{isLoading:!0})},W=function(e){return Q(e,{isLoading:!1})},J=function(e,t){return Q(e,{children:t})},M=function(e){return{type:"SET_ROOTS",roots:e}},Q=function(e,t){return{type:"EditNode",nodeId:e,props:t}},U=function(e){return{type:"SELECT_NODE",nodeId:e}},X={ArrowDown:function(e,t){if(L(e)===e.selectedNode)return;if(C(e,e.selectedNode)&&!B(e,e.selectedNode))t(U(T(e,e.selectedNode)[0]));else{var n=x(e,e.selectedNode);if(r=n,d=e.selectedNode,r.indexOf(d)==r.length-1){var o=w(e,e.selectedNode);t(U(h(o.context,o.parent)))}else t(U(h(n,e.selectedNode)))}var r,d},ArrowUp:function(e,t){if(E(e.rootNodes,e.selectedNode))return;var n=x(e,e.selectedNode);if(E(n,e.selectedNode))t(U(S(e,e.selectedNode)));else{var o=(r=n,d=e.selectedNode,r[r.indexOf(d)-1]);t(U(L(e,o)))}var r,d},ArrowRight:function(e,t){if(D(e,e.selectedNode))return;if(C(e,e.selectedNode)){if(!B(e,e.selectedNode))return t(U(T(e,e.selectedNode)[0]));t(z(e.selectedNode))}else t(H(e.selectedNode)),s(e.nodes[e.selectedNode].youtubeId).then(function(n){t(W(e.selectedNode)),t(Y(e.selectedNode,n))})},ArrowLeft:function(e,t){!B(e,e.selectedNode)&&C(e,e.selectedNode)?t(F(e.selectedNode)):k(e,e.selectedNode)||t(U(S(e,e.selectedNode)))}};var Y=function(e,t){return{type:"SET_CHILDREN",parentId:e,children:t.map(function(e){return{id:Math.random()+"",text:e.text,youtubeId:e.id}})}},q=function(e,t,n){if(k(e,e.selectedNode))t(M(n(e.rootNodes,e.selectedNode)));else{var o=S(e,e.selectedNode),r=ee(e,o);t(J(o,n(r,e.selectedNode)))}},$=function(e,t,n){var o=Object(v.a)(n);I(o,e.selectedNode),k(e,e.selectedNode)?t(M(o)):t(J(S(e,e.selectedNode),o))},G=function(e,t,n){var o;if(k(e,n))o=e.rootNodes;else{var r=S(e,n);o=ee(e,r)}var d=function(e,t,n){var o=e.indexOf(t),r=Object(v.a)(e);return r.splice(o+1,0,n),r}(o,n,e.selectedNode);k(e,n)?t(M(d)):t(J(S(e,n),d))},Z=function(e,t,n){var o=m(n,e.selectedNode);t(J(o,ee(e,o).concat([e.selectedNode])))},ee=function(e,t){return e.nodes[t].children||[]},te=function(e,t,n){var o;("Enter"===e.code&&(t.rootNodes.length>0&&A(t)?n(_(t.selectedNode)):function(e,t){t({type:"CreateNode",placeBefore:e.selectedNode,props:{text:"New Node",isEditing:!0}})}(t,n)),t.rootNodes.length>0&&A(t))||(ne(e,"ArrowDown")?function(e,t){q(e,t,j)}(t,n):ne(e,"ArrowUp")?function(e,t){q(e,t,g)}(t,n):ne(e,"ArrowLeft")?function(e,t){if(!k(e,e.selectedNode)){var n=S(e,e.selectedNode);G(e,t,n),$(e,t,ee(e,n))}}(t,n):ne(e,"ArrowRight")?function(e,t){var n=k(e,e.selectedNode)?e.rootNodes:ee(e,S(e,e.selectedNode));E(n,e.selectedNode)||($(e,t,n),Z(e,t,n))}(t,n):function(e,t,n){if(0!==t.rootNodes.length){var o=X[e.code];o&&(A(t)&&n(_(t.selectedNode)),o(t,n))}}(e,t,n),"F2"===e.code&&n((o=t.selectedNode,Q(o,{isEditing:!0}))),"Backspace"===e.code&&function(e,t){t({type:"Delete",nodeId:e.selectedNode})}(t,n))},ne=function(e,t){return e.shiftKey&&e.metaKey&&e.code===t},oe=n(8),re=function(e){var t=e.visible,n=e.id;if(!n)return null;return o.createElement("div",{style:{position:"absolute",right:15,bottom:15,display:t?void 0:"none"}},o.createElement(oe.a,{videoId:n,opts:{height:150,width:220,playerVars:{autoplay:1}}}))},de=function(e,t){return"PLAY"===t.type?Object(c.a)({},e,{isPlaying:!0,youtubeVideoId:t.youtubeVideoId}):"STOP"===t.type?Object(c.a)({},e,{isPlaying:!1,youtubeVideoId:void 0}):e},ie=function(e){var t,n,d=e.onKeyPress,i=e.tabIndex,c=e.children,u=Object(o.useState)(!1),s=Object(a.a)(u,2),l=s[0],f=s[1];return t=function(e){l&&d(e)},Object(o.useEffect)(function(){return window.document.addEventListener("keydown",t),function(){window.document.removeEventListener("keydown",t)}},n),r.a.createElement("div",{className:"area",style:{flex:1},tabIndex:i,onFocus:function(){return f(!0)},onBlur:function(){return f(!1)}},c)},ce=function(e){var t=e.level,n=e.nodeId,d=Object(o.useContext)(f),i=Object(a.a)(d,2),c=i[0],u=i[1],s=c.nodes[n],l=c.selectedNode===n,p=Object(o.useRef)(null);return Object(o.useEffect)(function(){var e=p.current;e&&s.isEditing&&e.focus()},[s.isEditing]),r.a.createElement("div",{style:{fontWeight:l?600:void 0,paddingLeft:t?20*t:void 0,backgroundColor:l?"#c3c3c3":void 0}},s.isEditing?r.a.createElement("input",{ref:p,type:"text",value:s.text,tabIndex:4,onBlur:function(){return u({type:"EditNode",nodeId:n,props:{isEditing:!1}})},onChange:function(e){return u({type:"EditNode",nodeId:n,props:{text:e.target.value}})}}):s.text,s.isLoading&&r.a.createElement("i",null," (Loading...)"),s.isChildrenHidden&&"...")},ae=function e(t){var n=t.nodes,d=t.selectedId,i=t.nodesToShow,c=t.level,a=void 0===c?0:c;return r.a.createElement(o.Fragment,null,i.map(function(t){return r.a.createElement(o.Fragment,{key:t},r.a.createElement(ce,{nodeId:t,level:a}),n[t].children&&!n[t].isChildrenHidden&&r.a.createElement(e,{nodes:n,nodesToShow:n[t].children,selectedId:d,level:a+1}))}))},ue=function(e){var t=e.app;return r.a.createElement(ae,{nodes:t.nodes,nodesToShow:t.rootNodes,selectedId:t.selectedNode})},se=function(){var e=V(),t=Object(a.a)(e,2),n=t[0],d=t[1],i=V(),u=Object(a.a)(i,2),s=u[0],f=u[1],N=Object(o.useReducer)(de,{isPlaying:!1}),v=Object(a.a)(N,2),h=v[0],b=v[1],O=function(e,t){if("KeyP"===e.code&&!A(t)){var n=t.nodes[t.selectedNode];n.youtubeId?b({type:"PLAY",youtubeVideoId:n.youtubeId}):console.warn(n,"Expected to have 'youtubeId' property, but it didn't")}};return Object(o.useEffect)(function(){var e=localStorage.getItem("favorites");e&&f({type:"RESTORE",savedState:JSON.parse(e)})},[]),Object(o.useEffect)(function(){localStorage.setItem("favorites",JSON.stringify(s))},[s]),r.a.createElement("div",null,r.a.createElement("div",{style:{flexDirection:"row",display:"flex",alignItems:"stretch",height:"100vh"}},r.a.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column"}},r.a.createElement(l,{onSearched:function(e){return d({type:"SET_NODES",nodes:e})}}),r.a.createElement(ie,{tabIndex:2,onKeyPress:function(e){"KeyD"!==e.code||A(n)||f({type:"CreateNode",placeBefore:s.rootNodes[0],props:Object(c.a)({},n.nodes[n.selectedNode],{children:[],id:Math.random()+""})}),O(e,n),te(e,n,d)}},r.a.createElement(p,{app:n,dispatch:d},r.a.createElement(ue,{app:n})))),r.a.createElement(ie,{tabIndex:3,onKeyPress:function(e){O(e,s),te(e,s,f)}},r.a.createElement(p,{app:s,dispatch:f},r.a.createElement("div",{style:{textAlign:"center"}},"Favorites"),r.a.createElement(ue,{app:s})))),r.a.createElement(re,{visible:!0,id:h.youtubeVideoId}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,1,2]]]);
//# sourceMappingURL=main.925bae81.chunk.js.map